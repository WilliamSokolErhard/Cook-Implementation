"use strict";
/**
 * FF Typescript Foundation Library
 * Copyright 2019 Ralph Wiedemeier, Frame Factory GmbH
 *
 * License: MIT
 */
Object.defineProperty(exports, "__esModule", { value: true });
/**
 * Returns an object containing source properties which are also present in the template object.
 * Source properties not present in the template are not copied. The result is an object
 * whose properties are an intersection between source and template object.
 * @param {any} source The source object
 * @param {T} template The template object
 * @param {boolean} matchTypes If true, types of properties must match
 * @returns {Partial<T>} The resulting object, conforming to a partial of the template.
 */
function restrict(source, template, matchTypes = true) {
    if (typeof source !== "object" || source === null) {
        source = {};
    }
    if (typeof template !== "object") {
        throw TypeError("template must be of type object");
    }
    let result = {};
    for (let key in template) {
        if (template.hasOwnProperty(key) && source.hasOwnProperty(key)) {
            const templatePropType = typeof template[key];
            if (templatePropType === "object") {
                result[key] = restrict(source[key], template[key], matchTypes);
            }
            else if (!matchTypes || typeof source[key] === templatePropType) {
                result[key] = source[key];
            }
        }
    }
    return result;
}
exports.default = restrict;
//# sourceMappingURL=restrict.js.map